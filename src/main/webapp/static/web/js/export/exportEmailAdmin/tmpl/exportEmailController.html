<i-notification></i-notification>
<div class="admin-exportEmail">
    <h2>Выгрузка e-mail</h2>

    <br />

    <form name="form" class="form-horizontal">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="vendorSelect">Вендор:</label>
            <select id="vendorSelect" name="vendor" ng-model="selectedVendor" ng-options="v.name for v in vendors" required></select>
        </div>
        <div ng-show="form.vendor.$dirty && form.vendor.$invalid">
            <div class="alert alert-danger" ng-show="form.vendor.$error.required">
                Выберите Вендора.
            </div>
        </div>

        <div class="form-group">
            <div class="checkbox col-sm-9">
                <label>
                    <input type="checkbox" ng-model="commonUsers">
                    Обычные пользователи
                </label>
            </div>
            <div class="checkbox col-sm-9">
                <label>
                    <input type="checkbox" ng-model="photographers">
                    Фотографы
                </label>
            </div>
        </div>
        <div class="alert alert-danger" ng-show="form.$dirty && userTypeNotSelected">
            Пожалуйста, выберите тип пользователей.
        </div>

        <p>Будут выгружены пользователи, не отписавшиеся от рассылки.</p>

        <button ng-click="exportEmails()"
                ng-disabled="form.$invalid || userTypeNotSelected || exporting"
                ng-class="{'button btn btn-default': exporting, 'btn btn-default': !exporting}">
            {{buttonText}}
            <img src="/static/web/images/ajax-loader.gif" ng-show="exporting" class="spinner"/>
        </button>
    </form>
</div>
